<%- include("partials/header.ejs") %>

<div class="container mt-5">
  <div class="row">
    <!-- Foto do Perfil -->
    <div class="col-md-4 text-center">
        <div class="profile-image">
            <img src="" alt="Foto de Perfil" class="img-fluid rounded-circle" style="width: 200px; height: 200px;">
        </div>
    </div>

    <!-- Informações do Usuário -->
    <div class="col-md-8">
        <h1 class="mb-4">Perfil do Utilizador</h1>

        <form action="/perfil" method="post">
            <!-- Nome do Usuário -->
            <div class="mb-3">
                <label for="nome">Nome</label>
                <input type="text" class="form-control" id="nome" name="nome" value="<%= perfil.user_nome %>" required>
            </div>

            <!-- Email do Usuário -->
            <div class="mb-3">
                <label for="email">Email</label>
                <input type="email" class="form-control" id="email" name="email" value="<%= perfil.email %>" required>
            </div>

            <!-- Atualizar Foto de Perfil -->
            <div class="mb-3">
                <label for="foto">Atualizar Foto</label>
                <input type="file" class="form-control" id="foto" name="foto">
            </div>

            <!-- Senha -->
            <div class="mb-3">
                <label for="senha">Senha</label>
                <input type="password" class="form-control" id="senha" name="senha">
                <small class="form-text text-muted">Deixe em branco para manter a senha atual.</small>
            </div>

            <!-- Exibir Informações de Endereço -->
            <h2 class="mt-5">Endereço</h2>
            <!-- Morada -->
            <div class="mb-3">
                <label for="morada">Morada</label>
                <input type="text" class="form-control" id="morada" name="morada" value="<%= perfil.morada %>" required>
            </div>

            <!-- Telefone -->
            <div class="mb-3">
                <label for="telemovel">Telefone</label>
                <input type="text" class="form-control" id="telemovel" name="telemovel" value="<%= perfil.telemovel %>" required>
            </div>

            <!-- NIF -->
            <div class="mb-3">
                <label for="nif">NIF</label>
                <input type="text" class="form-control" id="nif" name="nif" value="<%= perfil.nif %>" required>
            </div>

            <!-- Se for vendedor, exibir as qualificações -->
            <% if (perfil.vendedor == true) { %>
            <h2 class="mt-5">Qualificações</h2>
            <div class="mb-3">
                <label for="qualificacao">Qualificações</label>
                <textarea class="form-control" id="qualificacao" name="qualificacao" rows="3"><%= perfil.qualificacao %></textarea>
            </div>
            <!--Se for vendedor-->
            <h2>Minha Arte</h2>
            <% for (i = 0; i < totalArtigo; i ++){ %>
                <% if(artigos.user_id = perfil.user_id) {%>
                <!--Dispôr os artigos do utilizador-->
            <% }}} %>

            <!-- Botão de Atualizar Perfil -->
            <button type="submit" class="btn btn-primary">Atualizar Perfil</button>
        </form>
              <!-- Botão de logout Perfil -->
        <form action="/logout">
            <button type="submit" class="btn btn-primary">Logout</button>
        </form>
        <% if(perfil.vendedor = true){ %>
            <a href="/registoArtigo">
                <button>
                    Adicionar Artigo
                </button>
            </a>
        <% } %>
    </div>
  </div>
</div>

<%- include("partials/footer.ejs") %>